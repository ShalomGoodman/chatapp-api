"use strict";(self.webpackChunkchatapp=self.webpackChunkchatapp||[]).push([[9497],{3549:(ee,x,a)=>{a.r(x),a.d(x,{default:()=>pe});var e=a(67294),c=a(14087),L=a(185),D=a(53979),C=a(49066),W=a(29728),E=a(41580),S=a(11047),l=a(57993),I=a(85018),M=a(41054),A=a(64593),b=a(86896),R=a(88767),ae=a(41995),te=a(14900),Y=a(25804),$=a(16364),se=a(25752),O=a(75515),U=a(11276),u=a(67819),F=a(8934),H=a(94123),ne=a(45697),t=a.n(ne),X=a(88972);const J=(0,X.ZP)($.o)`
  ::-ms-reveal {
    display: none;
  }
`,N=(0,X.ZP)(se.E)`
  svg {
    height: ${(0,l.Q1)(16)};
    width: ${(0,l.Q1)(16)};
    path {
      fill: ${({theme:s})=>s.colors.neutral600};
    }
  }
`,B=({errors:s,onChange:d,values:m})=>{const{formatMessage:i}=(0,b.Z)(),[o,p]=(0,e.useState)(!1),[r,g]=(0,e.useState)(!1),[T,G]=(0,e.useState)(!1);return e.createElement(E.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(S.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(O.Z,{variant:"delta",as:"h2"},i({id:"global.change-password",defaultMessage:"Change password"})),e.createElement(U.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement($.o,{error:s.currentPassword?i({id:s.currentPassword,defaultMessage:s.currentPassword}):"",onChange:d,value:m.currentPassword,label:i({id:"Auth.form.currentPassword.label",defaultMessage:"Current Password"}),name:"currentPassword",type:o?"text":"password",endAction:e.createElement(N,{onClick:P=>{P.stopPropagation(),p(y=>!y)},label:i(o?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},o?e.createElement(F.Z,null):e.createElement(H.Z,null))}))),e.createElement(U.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement(J,{error:s.password?i({id:s.password,defaultMessage:s.password}):"",onChange:d,value:m.password,label:i({id:"global.password",defaultMessage:"Password"}),name:"password",type:r?"text":"password",autoComplete:"new-password",endAction:e.createElement(N,{onClick:P=>{P.stopPropagation(),g(y=>!y)},label:i(r?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},r?e.createElement(F.Z,null):e.createElement(H.Z,null))})),e.createElement(u.P,{s:12,col:6},e.createElement(J,{error:s.confirmPassword?i({id:s.confirmPassword,defaultMessage:s.confirmPassword}):"",onChange:d,value:m.confirmPassword,label:i({id:"Auth.form.confirmPassword.label",defaultMessage:"Password confirmation"}),name:"confirmPassword",type:T?"text":"password",autoComplete:"new-password",endAction:e.createElement(N,{onClick:P=>{P.stopPropagation(),G(y=>!y)},label:i(T?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},T?e.createElement(F.Z,null):e.createElement(H.Z,null))})))))};B.propTypes={errors:t().shape({currentPassword:t().string,password:t().string,confirmPassword:t().string}),onChange:t().func,values:t().shape({currentPassword:t().string,password:t().string,confirmPassword:t().string})},B.defaultProps={errors:{},onChange(){},values:{currentPassword:"",password:"",confirmPassword:""}};const re=B;var V=a(40619),K=a(82562),oe=a(11700),le=a.n(oe);const Q=({onChange:s,values:d,localeNames:m,allApplicationThemes:i})=>{const{formatMessage:o}=(0,b.Z)(),p=Object.keys(i).filter(r=>i[r]);return e.createElement(E.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(S.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(S.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(O.Z,{variant:"delta",as:"h2"},o({id:"Settings.profile.form.section.experience.title",defaultMessage:"Experience"})),e.createElement(O.Z,null,o({id:"Settings.profile.form.section.experience.interfaceLanguageHelp",defaultMessage:"Preference changes will apply only to you. More information is available {here}."},{here:e.createElement(E.x,{as:"a",color:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#locales"},o({id:"Settings.profile.form.section.experience.here",defaultMessage:"here"}))}))),e.createElement(U.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement(V.P,{label:o({id:"Settings.profile.form.section.experience.interfaceLanguage",defaultMessage:"Interface language"}),placeholder:o({id:"global.select",defaultMessage:"Select"}),hint:o({id:"Settings.profile.form.section.experience.interfaceLanguage.hint",defaultMessage:"This will only display your own interface in the chosen language."}),onClear:()=>{s({target:{name:"preferedLanguage",value:null}})},clearLabel:o({id:"Settings.profile.form.section.experience.clear.select",defaultMessage:"Clear the interface language selected"}),value:d.preferedLanguage,onChange:r=>{s({target:{name:"preferedLanguage",value:r}})}},Object.entries(m).map(([r,g])=>e.createElement(K.W,{value:r,key:r},g)))),e.createElement(u.P,{s:12,col:6},e.createElement(V.P,{label:o({id:"Settings.profile.form.section.experience.mode.label",defaultMessage:"Interface mode"}),placeholder:o({id:"components.Select.placeholder",defaultMessage:"Select"}),hint:o({id:"Settings.profile.form.section.experience.mode.hint",defaultMessage:"Displays your interface in the chosen mode."}),value:d.currentTheme,onChange:r=>{s({target:{name:"currentTheme",value:r}})}},p.map(r=>e.createElement(K.W,{value:r,key:r},o({id:"Settings.profile.form.section.experience.mode.option-label",defaultMessage:"{name} mode"},{name:o({id:r,defaultMessage:le()(r)})}))))))))};Q.propTypes={allApplicationThemes:t().object,onChange:t().func,values:t().shape({preferedLanguage:t().string,currentTheme:t().string}),localeNames:t().object},Q.defaultProps={allApplicationThemes:{},onChange(){},values:{preferedLanguage:null,currentTheme:""},localeNames:{}};const ie=Q,z=({errors:s,onChange:d,values:m})=>{const{formatMessage:i}=(0,b.Z)();return e.createElement(E.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(S.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(O.Z,{variant:"delta",as:"h2"},i({id:"global.profile",defaultMessage:"Profile"})),e.createElement(U.r,{gap:5},e.createElement(u.P,{s:12,col:6},e.createElement(l.jm,{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},error:s.firstname,onChange:d,value:m.firstname,type:"text",name:"firstname",required:!0})),e.createElement(u.P,{s:12,col:6},e.createElement(l.jm,{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},error:s.lastname,onChange:d,value:m.lastname,type:"text",name:"lastname"})),e.createElement(u.P,{s:12,col:6},e.createElement(l.jm,{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},error:s.email,onChange:d,value:m.email,type:"email",name:"email",required:!0})),e.createElement(u.P,{s:12,col:6},e.createElement(l.jm,{intlLabel:{id:"Auth.form.username.label",defaultMessage:"Username"},error:s.username,onChange:d,value:m.username,type:"text",name:"username"})))))};z.propTypes={errors:t().shape({firstname:t().string,lastname:t().string,username:t().string,email:t().string}),onChange:t().func,values:t().shape({firstname:t().string,lastname:t().string,username:t().string,email:t().string})},z.defaultProps={errors:{},onChange(){},values:{firstname:"",lastname:"",username:"",email:""}};const de=z;var me=a(87561),ce=a(39394);const ue=me.Ry().shape(ce.Rw),pe=()=>{var s;const{changeLocale:d,localeNames:m}=(0,ae.Z)(),{setUserDisplayName:i}=(0,l.L7)(),o=(0,R.useQueryClient)(),{formatMessage:p}=(0,b.Z)(),{trackUsage:r}=(0,l.rS)(),g=(0,l.lm)(),{lockApp:T,unlockApp:G}=(0,l.o1)(),{notifyStatus:P}=(0,c.G)(),{currentTheme:y,themes:ge,onChangeTheme:fe}=(0,te.M1)(),{get:k,put:he}=(0,l.kY)();(0,l.go)();const{isLoading:we,data:j}=(0,R.useQuery)("user",async()=>{const{data:n}=await k("/admin/users/me");return n.data},{onSuccess(){P(p({id:"Settings.profile.form.notify.data.loaded",defaultMessage:"Your profile data has been loaded"}))},onError(){g({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),{isLoading:ve,data:q}=(0,R.useQuery)(["providers","isSSOLocked"],async()=>{const{data:{data:n}}=await k("/admin/providers/isSSOLocked");return n},{enabled:window.strapi.isEE&&window.strapi.features.isEnabled("sso"),onError(){g({type:"warning",message:{id:"Settings.permissions.users.sso.provider.error"}})}}),Ee=we||ve,_=(0,R.useMutation)(async n=>{const{confirmPassword:f,currentTheme:h,...w}=n,{data:v}=await he("/admin/users/me",w);return{...v.data,currentTheme:n.currentTheme}},{async onSuccess(n){await o.invalidateQueries("user");const{email:f,firstname:h,lastname:w,username:v,preferedLanguage:Z}=n;l.I8.setUserInfo({email:f,firstname:h,lastname:w,username:v,preferedLanguage:Z});const xe=n.username||(0,Y.Pp)(n.firstname,n.lastname);i(xe),d(n.preferedLanguage),fe(n.currentTheme),r("didChangeMode",{newMode:n.currentTheme}),g({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}})},onSettled(){G()},refetchActive:!0}),{isLoading:Pe}=_,ye=async(n,{setErrors:f})=>{T();const h=n.username||null;_.mutate({...n,username:h},{onError(w){var v;const Z=(v=w==null?void 0:w.response)==null?void 0:v.data;return Z!=null&&Z.data?f(Z.data):g({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};if(Ee)return e.createElement(L.o,{"aria-busy":"true"},e.createElement(A.q,{title:p({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(D.T,{title:p({id:"Settings.profile.form.section.profile.page.title",defaultMessage:"Profile page"})}),e.createElement(C.D,null,e.createElement(l.dO,null)));const Se=(s=q==null?void 0:q.isSSOLocked)!=null?s:!1,{email:Me,firstname:Le,lastname:Ie,username:Ae,preferedLanguage:Te}=j,Ze={email:Me,firstname:Le,lastname:Ie,username:Ae,preferedLanguage:Te,currentTheme:y};return e.createElement(L.o,{"aria-busy":Pe},e.createElement(A.q,{title:p({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(M.J9,{onSubmit:ye,initialValues:Ze,validateOnChange:!1,validationSchema:ue,enableReinitialize:!0},({errors:n,values:f,handleChange:h,isSubmitting:w,dirty:v})=>e.createElement(l.l0,null,e.createElement(D.T,{title:j.username||(0,Y.Pp)(j.firstname,j.lastname),primaryAction:e.createElement(W.z,{startIcon:e.createElement(I.Z,null),loading:w,type:"submit",disabled:!v},p({id:"global.save",defaultMessage:"Save"}))}),e.createElement(E.x,{paddingBottom:10},e.createElement(C.D,null,e.createElement(S.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(de,{errors:n,onChange:h,values:f}),!Se&&e.createElement(re,{errors:n,onChange:h,values:f}),e.createElement(ie,{allApplicationThemes:ge,onChange:h,values:f,localeNames:m})))))))}},39394:(ee,x,a)=>{a.d(x,{YM:()=>l,Rw:()=>C});var e=a(87561),c=a(57993);const L={firstname:e.Z_().trim().required(c.I0.required),lastname:e.Z_(),email:e.Z_().email(c.I0.email).lowercase().required(c.I0.required),username:e.Z_().nullable(),password:e.Z_().min(8,c.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number"),confirmPassword:e.Z_().min(8,c.I0.minLength).oneOf([e.iH("password"),null],"components.Input.error.password.noMatch").when("password",(I,M)=>I?M.required(c.I0.required):M)},C={...L,currentPassword:e.Z_().when(["password","confirmPassword"],(I,M,A)=>I||M?A.required(c.I0.required):A),preferedLanguage:e.Z_().nullable()},E={roles:e.IX().min(1,c.I0.required).required(c.I0.required)},l=e.Ry().shape({...L,isActive:e.Xg(),...E})}}]);

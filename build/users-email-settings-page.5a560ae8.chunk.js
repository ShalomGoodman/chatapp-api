"use strict";(self.webpackChunkchatapp=self.webpackChunkchatapp||[]).push([[8418],{84210:(S,T,t)=>{t.r(T),t.d(T,{default:()=>pe});var e=t(67294),r=t(14087),M=t(185),x=t(53979),O=t(49066),a=t(57993),d=t(86896),y=t(88767),f=t(84419),n=t(42722),L=t(42866),j=t(24969),l=t(59946),i=t(11276),s=t(67819),m=t(61467),c=t(36856),v=t(29728),Z=t(63321),I=t(36773),z=t(41054),A=t(45697),u=t.n(A),R=t(87561);const te=R.Ry().shape({options:R.Ry().shape({from:R.Ry().shape({name:R.Z_().required(a.I0.required),email:R.Z_().email(a.I0.email).required(a.I0.required)}).required(),response_email:R.Z_().email(a.I0.email),object:R.Z_().required(a.I0.required),message:R.Z_().required(a.I0.required)}).required(a.I0.required)}),X=({template:o,onToggle:E,onSubmit:g})=>{const{formatMessage:h}=(0,d.Z)();return e.createElement(L.P,{onClose:E,labelledBy:`${h({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${h({id:(0,n.OB)(o.display),defaultMessage:o.display})}`},e.createElement(j.x,null,e.createElement(Z.O,{label:`${h({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${h({id:(0,n.OB)(o.display),defaultMessage:o.display})}`},e.createElement(I.$,null,h({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(I.$,{isCurrent:!0},h({id:(0,n.OB)(o.display),defaultMessage:o.display})))),e.createElement(z.J9,{onSubmit:g,initialValues:o,validateOnChange:!1,validationSchema:te,enableReinitialize:!0},({errors:p,values:P,handleChange:C,isSubmitting:J})=>{var F,D,U,$,H,W,N;return e.createElement(a.l0,null,e.createElement(l.f,null,e.createElement(i.r,{gap:5},e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:C,value:P.options.from.name,error:(D=(F=p==null?void 0:p.options)==null?void 0:F.from)==null?void 0:D.name,type:"text"})),e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:C,value:P.options.from.email,error:($=(U=p==null?void 0:p.options)==null?void 0:U.from)==null?void 0:$.email,type:"text"})),e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:C,value:P.options.response_email,error:(H=p==null?void 0:p.options)==null?void 0:H.response_email,type:"text"})),e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:C,value:P.options.object,error:(W=p==null?void 0:p.options)==null?void 0:W.object,type:"text"})),e.createElement(s.P,{col:12,s:12},e.createElement(m.g,{label:h({id:(0,n.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),id:"options.message",onChange:C,value:P.options.message,error:((N=p==null?void 0:p.options)==null?void 0:N.message)&&h({id:p.options.message,defaultMessage:p.options.message})})))),e.createElement(c.m,{startActions:e.createElement(v.z,{onClick:E,variant:"tertiary"},"Cancel"),endActions:e.createElement(v.z,{loading:J,type:"submit"},"Finish")}))}))};X.propTypes={template:u().shape({display:u().string,icon:u().string,options:u().shape({from:u().shape({name:u().string,email:u().string}),message:u().string,object:u().string,response_email:u().string})}).isRequired,onSubmit:u().func.isRequired,onToggle:u().func.isRequired};const ae=X;var ne=t(38939),le=t(8060),G=t(79031),B=t(37909),V=t(63237),K=t(75515),se=t(15234),Y=t(52624),w=t(12028),ie=t(30815),k=t(4585),oe=t(85018);const q=({canUpdate:o,onEditClick:E})=>{const{formatMessage:g}=(0,d.Z)();return e.createElement(ne.i,{colCount:3,rowCount:3},e.createElement(le.h,null,e.createElement(G.Tr,null,e.createElement(B.Th,{width:"1%"},e.createElement(V.T,null,g({id:(0,n.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(B.Th,null,e.createElement(K.Z,{variant:"sigma",textColor:"neutral600"},g({id:(0,n.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(B.Th,{width:"1%"},e.createElement(V.T,null,g({id:(0,n.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(se.p,null,e.createElement(G.Tr,{...(0,a.X7)({fn:()=>E("reset_password")})},e.createElement(B.Td,null,e.createElement(Y.J,null,e.createElement(ie.Z,{"aria-label":g({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(B.Td,null,e.createElement(K.Z,null,g({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(B.Td,{...a.UW},e.createElement(w.h,{onClick:()=>E("reset_password"),label:g({id:(0,n.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:o&&e.createElement(k.Z,null)}))),e.createElement(G.Tr,{...(0,a.X7)({fn:()=>E("email_confirmation")})},e.createElement(B.Td,null,e.createElement(Y.J,null,e.createElement(oe.Z,{"aria-label":g({id:(0,n.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(B.Td,null,e.createElement(K.Z,null,g({id:(0,n.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(B.Td,{...a.UW},e.createElement(w.h,{onClick:()=>E("email_confirmation"),label:g({id:(0,n.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:o&&e.createElement(k.Z,null)})))))};q.propTypes={canUpdate:u().bool.isRequired,onEditClick:u().func.isRequired};const re=q,de=async()=>{const{get:o}=(0,a.tg)(),{data:E}=await o((0,n.Gc)("email-templates"));return E},me=o=>{const{put:E}=(0,a.tg)();return E((0,n.Gc)("email-templates"),o)},ce=()=>e.createElement(a.O4,{permissions:f._.readEmailTemplates},e.createElement(ue,null)),ue=()=>{const{formatMessage:o}=(0,d.Z)(),{trackUsage:E}=(0,a.rS)(),{notifyStatus:g}=(0,r.G)(),h=(0,a.lm)(),{lockApp:p,unlockApp:P}=(0,a.o1)(),C=(0,e.useRef)(E),J=(0,y.useQueryClient)();(0,a.go)();const[F,D]=(0,e.useState)(!1),[U,$]=(0,e.useState)(null),{isLoading:H,allowedActions:{canUpdate:W}}=(0,a.ss)({update:f._.updateEmailTemplates}),{status:N,data:_}=(0,y.useQuery)("email-templates",()=>de(),{onSuccess(){g(o({id:(0,n.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),Ee=H||N!=="success",Q=()=>{D(b=>!b)},ge=b=>{$(b),Q()},ee=(0,y.useMutation)(b=>me({"email-templates":b}),{async onSuccess(){await J.invalidateQueries("email-templates"),h({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),C.current("didEditEmailTemplates"),P(),Q()},onError(){h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),P()},refetchActive:!0}),{isLoading:fe}=ee,ve=b=>{p(),C.current("willEditEmailTemplates");const he={..._,[U]:b};ee.mutate(he)};return Ee?e.createElement(M.o,{"aria-busy":"true"},e.createElement(a.SL,{name:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(x.T,{title:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(O.D,null,e.createElement(a.dO,null))):e.createElement(M.o,{"aria-busy":fe},e.createElement(a.SL,{name:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(x.T,{title:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(O.D,null,e.createElement(re,{onEditClick:ge,canUpdate:W}),F&&e.createElement(ae,{template:_[U],onToggle:Q,onSubmit:ve})))},pe=ce},42722:(S,T,t)=>{t.d(T,{YX:()=>x,Gc:()=>d,OB:()=>y.Z});var e=t(41609),r=t.n(e);const x=f=>Object.keys(f).reduce((n,L)=>{const j=f[L].controllers,l=Object.keys(j).reduce((i,s)=>(r()(j[s])||(i[s]=j[s]),i),{});return r()(l)||(n[L]={controllers:l}),n},{});var O=t(83086);const d=f=>`/${O.Z}/${f}`;var y=t(97961)},49066:(S,T,t)=>{t.d(T,{D:()=>M});var e=t(85893),r=t(41580);const M=({children:x})=>(0,e.jsx)(r.x,{paddingLeft:10,paddingRight:10,children:x})},53979:(S,T,t)=>{t.d(T,{T:()=>n});var e=t(85893),r=t(67294),M=t(88972);const x=l=>{const i=(0,r.useRef)(null),[s,m]=(0,r.useState)(!0),c=([v])=>{m(v.isIntersecting)};return(0,r.useEffect)(()=>{const v=i.current,Z=new IntersectionObserver(c,l);return v&&Z.observe(i.current),()=>{v&&Z.disconnect()}},[i,l]),[i,s]};var O=t(79698);const a=(l,i)=>{const s=(0,O.W)(i);(0,r.useLayoutEffect)(()=>{const m=new ResizeObserver(s);return Array.isArray(l)?l.forEach(c=>{c.current&&m.observe(c.current)}):l.current&&m.observe(l.current),()=>{m.disconnect()}},[l,s])};var d=t(41580),y=t(11047),f=t(75515);const n=l=>{const i=(0,r.useRef)(null),[s,m]=(0,r.useState)(null),[c,v]=x({root:null,rootMargin:"0px",threshold:0});return a(c,()=>{c.current&&m(c.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{i.current&&m(i.current.getBoundingClientRect())},[i]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:s==null?void 0:s.height},ref:c,children:v&&(0,e.jsx)(j,{ref:i,...l})}),!v&&(0,e.jsx)(j,{...l,sticky:!0,width:s==null?void 0:s.width})]})};n.displayName="HeaderLayout";const L=(0,M.ZP)(d.x)`
  width: ${({width:l})=>l?`${l/16}rem`:void 0};
  z-index: ${({theme:l})=>l.zIndices[1]};
`,j=r.forwardRef(({navigationAction:l,primaryAction:i,secondaryAction:s,subtitle:m,title:c,sticky:v,width:Z,...I},z)=>{const A=typeof m=="string";return v?(0,e.jsx)(L,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:Z,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(y.k,{justifyContent:"space-between",children:[(0,e.jsxs)(y.k,{children:[l&&(0,e.jsx)(d.x,{paddingRight:3,children:l}),(0,e.jsxs)(d.x,{children:[(0,e.jsx)(f.Z,{variant:"beta",as:"h1",...I,children:c}),A?(0,e.jsx)(f.Z,{variant:"pi",textColor:"neutral600",children:m}):m]}),s?(0,e.jsx)(d.x,{paddingLeft:4,children:s}):null]}),(0,e.jsx)(y.k,{children:i?(0,e.jsx)(d.x,{paddingLeft:2,children:i}):void 0})]})}):(0,e.jsxs)(d.x,{ref:z,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:l?6:8,background:"neutral100","data-strapi-header":!0,children:[l?(0,e.jsx)(d.x,{paddingBottom:2,children:l}):null,(0,e.jsxs)(y.k,{justifyContent:"space-between",children:[(0,e.jsxs)(y.k,{minWidth:0,children:[(0,e.jsx)(f.Z,{as:"h1",variant:"alpha",...I,children:c}),s?(0,e.jsx)(d.x,{paddingLeft:4,children:s}):null]}),i]}),A?(0,e.jsx)(f.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:m}):m]})})},185:(S,T,t)=>{t.d(T,{o:()=>O});var e=t(85893),r=t(88972),M=t(41580);const x=(0,r.ZP)(M.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,O=({labelledBy:a="main-content-title",...d})=>(0,e.jsx)(x,{"aria-labelledby":a,as:"main",id:"main-content",tabIndex:-1,...d})}}]);

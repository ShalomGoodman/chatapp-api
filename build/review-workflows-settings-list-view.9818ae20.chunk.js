"use strict";(self.webpackChunkchatapp=self.webpackChunkchatapp||[]).push([[349],{52713:(I,f,e)=>{e.d(f,{r:()=>d});var t=e(67294),n=e(41580),l=e(45697),m=e.n(l),E=e(99168);function p(v,T,s){if(!v||!T)return{display:"none"};const{x:a,y:o}=s;return{transform:`translate(${a}px, ${o}px)`}}function d({renderItem:v}){const{itemType:T,isDragging:s,item:a,initialOffset:o,currentOffset:w,mouseOffset:h}=(0,E.useDragLayer)(g=>({item:g.getItem(),itemType:g.getItemType(),initialOffset:g.getInitialSourceClientOffset(),currentOffset:g.getSourceClientOffset(),isDragging:g.isDragging(),mouseOffset:g.getClientOffset()}));return s?t.createElement(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},t.createElement(n.x,{style:p(o,w,h)},v({type:T,item:a}))):null}d.propTypes={renderItem:m().func.isRequired}},7761:(I,f,e)=>{e.d(f,{pl:()=>T,aY:()=>x,q5:()=>h.q});var t=e(67294),n=e(57993),l=e(25804),m=e(18172);const E={data:[],isLoading:!0},d=(L,A)=>(0,m.ZP)(L,y=>{switch(A.type){case"GET_DATA_SUCCEEDED":{y.data=A.data,y.isLoading=!1;break}case"GET_DATA_ERROR":{y.isLoading=!1;break}default:return y}}),T=({ssoEnabled:L})=>{const[A,y]=(0,t.useReducer)(d,E),r=(0,n.lm)(),{get:i}=(0,n.kY)();return(0,t.useEffect)(()=>{(async()=>{try{if(!L){y({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:C}=await i((0,l.IF)("providers"));y({type:"GET_DATA_SUCCEEDED",data:C})}catch(C){console.error(C),y({type:"GET_DATA_ERROR"}),r({type:"warning",message:{id:"notification.error"}})}})()},[i,L,r]),A};var s=e(14293),a=e.n(s),o=e(86896),w=e(16550),h=e(71926);const g="strapi-notification-seat-limit",D="https://cloud.strapi.io/profile/billing",N="https://strapi.io/billing/request-seats",x=()=>{const{formatMessage:L}=(0,o.Z)();let{license:A,isError:y,isLoading:r}=(0,h.q)();const i=(0,n.lm)(),{pathname:O}=(0,w.TH)(),{enforcementUserCount:C,permittedSeats:S,licenseLimitStatus:M,isHostedOnStrapiCloud:B}=A;(0,t.useEffect)(()=>{if(y||r)return;const F=!a()(S)&&!window.sessionStorage.getItem(`${g}-${O}`)&&(M==="AT_LIMIT"||M==="OVER_LIMIT");let $;M==="OVER_LIMIT"?$="warning":M==="AT_LIMIT"&&($="softWarning"),F&&i({type:$,message:L({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:M}),title:L({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:M,enforcementUserCount:C,permittedSeats:S}),link:{url:B?D:N,label:L({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:B})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${g}-${O}`,!0)}})},[i,A,O,L,r,S,M,C,B,y])}},71926:(I,f,e)=>{e.d(f,{q:()=>m});var t=e(67294),n=e(57993),l=e(88767);function m({enabled:E}={enabled:!0}){const{get:p}=(0,n.kY)(),{data:d,isError:v,isLoading:T}=(0,l.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:o}}=await p("/admin/license-limit-information");return o},{enabled:E}),s=d!=null?d:{},a=t.useCallback(o=>{var w,h;const g=((w=s==null?void 0:s.features)!=null?w:[]).find(D=>D.name===o);return(h=g==null?void 0:g.options)!=null?h:{}},[s==null?void 0:s.features]);return{license:s,getFeature:a,isError:v,isLoading:T}}},43390:(I,f,e)=>{e.d(f,{eJ:()=>y,lx:()=>L,h4:()=>r,fC:()=>A});var t=e(67294),n=e(17034),l=e(185),m=e(49066),E=e(53979),p=e(57993),d=e(67109),v=e(86896),T=e(52713),s=e(86978),a=e(11047),o=e(75515),w=e(12645),h=e(45697),g=e.n(h),D=e(88972);const N=(0,D.ZP)(a.k)`
  svg path {
    fill: ${({theme:i})=>i.colors.neutral600};
  }
`;function P({name:i}){return t.createElement(a.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,p.Q1)(300)},t.createElement(N,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(w.Z,{width:`${8/16}rem`})),t.createElement(o.Z,{fontWeight:"bold"},i))}P.propTypes={name:g().string.isRequired};function x({type:i,item:O}){switch(i){case s.uL.STAGE:return t.createElement(P,{...O});default:return null}}function L(){return t.createElement(T.r,{renderItem:x})}function A({children:i}){return t.createElement(n.A,null,t.createElement(l.o,{tabIndex:-1},t.createElement(m.D,null,i)))}function y({href:i}){const{formatMessage:O}=(0,v.Z)();return t.createElement(p.rU,{startIcon:t.createElement(d.Z,null),to:i},O({id:"global.back",defaultMessage:"Back"}))}function r({title:i,subtitle:O,navigationAction:C,primaryAction:S}){return t.createElement(t.Fragment,null,t.createElement(p.SL,{name:i}),t.createElement(E.T,{navigationAction:C,primaryAction:S,title:i,subtitle:O}))}},38705:(I,f,e)=>{e.d(f,{uT:()=>x,fC:()=>y,Dx:()=>P});var t=e(67294),n=e(75515),l=e(11047),m=e(42866),E=e(59946),p=e(41580),d=e(12028),v=e(80994),T=e(70968),s=e(45697),a=e.n(s),o=e(86896),w=e(88972);const h=e.p+"0cd5f8915b265d5b1856.png",g="limits-title",D="https://strapi.io/pricing-cloud",N="https://strapi.io/contact-sales";function P({children:r}){return t.createElement(n.Z,{variant:"alpha",id:g},r)}P.propTypes={children:a().node.isRequired};function x({children:r}){return t.createElement(n.Z,{variant:"omega"},r)}x.propTypes={children:a().node.isRequired};function L(){const{formatMessage:r}=(0,o.Z)();return t.createElement(l.k,{gap:2,paddingTop:4},t.createElement(v.Q,{variant:"default",isExternal:!0,href:D},r({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(v.Q,{variant:"tertiary",isExternal:!0,href:N},r({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const A=w.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:r})=>`-${r.spaces[7]}`};
  margin-top: ${({theme:r})=>`-${r.spaces[7]}`};
  width: 360px;
`;function y({children:r,isOpen:i,onClose:O}){const{formatMessage:C}=(0,o.Z)();return i?t.createElement(m.P,{labelledBy:g},t.createElement(E.f,null,t.createElement(l.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(l.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},r,t.createElement(L,null)),t.createElement(l.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(A,{src:h,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(p.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(d.h,{icon:t.createElement(T.Z,null),"aria-label":C({id:"global.close",defaultMessage:"Close"}),onClick:O})))))):null}y.defaultProps={isOpen:!1},y.propTypes={children:a().node.isRequired,isOpen:a().bool,onClose:a().func.isRequired}},86978:(I,f,e)=>{e.d(f,{$k:()=>v,Ef:()=>w,FT:()=>a,Nj:()=>d,Ot:()=>p,VS:()=>T,_X:()=>h,gu:()=>l,lv:()=>s,qZ:()=>m,sN:()=>n,uL:()=>o,x4:()=>E});var t=e(42675);const n="settings_review-workflows",l="Settings/Review_Workflows/RESET_WORKFLOW",m="Settings/Review_Workflows/SET_WORKFLOW",E="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",p="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",d="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",T="Settings/Review_Workflows/WORKFLOW_UPDATE",s={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},a=t.W.colors.primary600,o={STAGE:"stage"},w="numberOfWorkflows",h="stagesPerWorkflow"},52258:(I,f,e)=>{e.d(f,{n:()=>l});var t=e(57993),n=e(88767);function l(m={}){var E;const{get:p}=(0,t.kY)(),{id:d="",...v}=m,T={populate:"stages"},{data:s,isLoading:a,status:o,refetch:w}=(0,n.useQuery)(["review-workflows","workflows",d],async()=>(await p(`/admin/review-workflows/workflows/${d}`,{params:{...T,...v}})).data);let h=[];return d&&(s!=null&&s.data)?h=[s.data]:Array.isArray(s==null?void 0:s.data)&&(h=s.data),{meta:(E=s==null?void 0:s.meta)!=null?E:{},workflows:h,isLoading:a,status:o,refetch:w}}},26259:(I,f,e)=>{e.r(f),e.d(f,{default:()=>$});var t=e(67294),n=e(57993),l=e(86706),m=e(36364),E=e(11047),p=e(77197),d=e(38939),v=e(49386),T=e(8060),s=e(79031),a=e(37909),o=e(75515),w=e(63237),h=e(15234),g=e(12028),D=e(96315),N=e(4585),P=e(20022),x=e(86896),L=e(88767),A=e(16550),y=e(88972),r=e(92686),i=e(7761),O=e(43390),C=e(38705),S=e(86978),M=e(52258);const B=(0,y.ZP)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:c})=>`${c.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:c})=>c.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:c})=>c.colors.neutral800};
      }
    }
  }
`;function F(){const{formatMessage:c}=(0,x.Z)(),{push:K}=(0,A.k6)(),{collectionTypes:J,singleTypes:b,isLoading:q}=(0,r.G)(),{meta:W,workflows:H,isLoading:G,refetch:_}=(0,M.n)(),[Q,j]=t.useState(null),[ee,k]=t.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),V=(0,n.lm)(),{getFeature:se,isLoading:Y}=(0,i.q5)(),{trackUsage:X}=(0,n.rS)(),ae=(0,l.v9)(m._),{allowedActions:{canCreate:z,canDelete:oe}}=(0,n.ss)(ae.settings["review-workflows"]),R=se("review-workflows"),{mutateAsync:le,isLoading:re}=(0,L.useMutation)(async({workflowId:u,stages:U})=>{const{data:{data:Z}}=await te(`/admin/review-workflows/workflows/${u}`,{data:U});return Z},{onSuccess(){V({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=u=>[...J,...b].find(Z=>Z.uid===u).info.displayName,de=u=>{j(u)},ce=()=>{j(null)},ue=async()=>{try{const u=await le({workflowId:Q});return await _(),j(null),u}catch(u){return V({type:"warning",message:ne(u)}),null}};return t.useEffect(()=>{!G&&!Y&&R!=null&&R[S.Ef]&&(W==null?void 0:W.workflowCount)>parseInt(R[S.Ef],10)&&k(!0)},[Y,G,R,W==null?void 0:W.workflowCount,W.workflowsTotal]),t.createElement(t.Fragment,null,t.createElement(O.h4,{primaryAction:t.createElement(n.Qj,{disabled:!z,startIcon:t.createElement(D.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:u=>{R!=null&&R[S.Ef]&&(W==null?void 0:W.workflowCount)>=parseInt(R[S.Ef],10)?(u.preventDefault(),k(!0)):X("willCreateWorkflow")}},c({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:c({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:c({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),t.createElement(O.fC,null,G||q?t.createElement(E.k,{justifyContent:"center"},t.createElement(p.a,null,c({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):t.createElement(d.i,{colCount:3,footer:z&&t.createElement(v.c,{icon:t.createElement(D.Z,null),onClick:()=>{R!=null&&R[S.Ef]&&(W==null?void 0:W.workflowCount)>=parseInt(R[S.Ef],10)?k(!0):(K("/settings/review-workflows/create"),X("willCreateWorkflow"))}},c({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},t.createElement(T.h,null,t.createElement(s.Tr,null,t.createElement(a.Th,null,t.createElement(o.Z,{variant:"sigma"},c({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),t.createElement(a.Th,null,t.createElement(o.Z,{variant:"sigma"},c({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),t.createElement(a.Th,null,t.createElement(o.Z,{variant:"sigma"},c({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),t.createElement(a.Th,null,t.createElement(w.T,null,c({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),t.createElement(h.p,null,H.map(u=>{var U;return t.createElement(s.Tr,{...(0,n.X7)({fn(Z){Z.target.nodeName!=="BUTTON"&&K(`/settings/review-workflows/${u.id}`)}}),key:`workflow-${u.id}`},t.createElement(a.Td,{width:(0,n.Q1)(250)},t.createElement(o.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},u.name)),t.createElement(a.Td,null,t.createElement(o.Z,{textColor:"neutral800"},u.stages.length)),t.createElement(a.Td,null,t.createElement(o.Z,{textColor:"neutral800"},((U=u==null?void 0:u.contentTypes)!=null?U:[]).map(ie).join(", "))),t.createElement(a.Td,null,t.createElement(E.k,{alignItems:"center",justifyContent:"end"},t.createElement(B,{to:`/settings/review-workflows/${u.id}`,"aria-label":c({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:u.name})},t.createElement(N.Z,null)),H.length>1&&oe&&t.createElement(g.h,{"aria-label":c({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:t.createElement(P.Z,null),noBorder:!0,onClick:()=>{de(u.id)}}))))}))),t.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:re,isOpen:!!Q,onToggleDialog:ce,onConfirm:ue}),t.createElement(C.fC,{isOpen:ee,onClose:()=>k(!1)},t.createElement(C.Dx,null,c({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(C.uT,null,c({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function $(){const c=(0,l.v9)(m._);return t.createElement(n.O4,{permissions:c.settings["review-workflows"].main},t.createElement(F,null))}},49386:(I,f,e)=>{e.d(f,{c:()=>T});var t=e(85893),n=e(88972),l=e(41580),m=e(70004),E=e(11047),p=e(75515);const d=(0,n.ZP)(l.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:s})=>s.colors.primary600};
  }
`,v=(0,n.ZP)(l.x)`
  border-radius: 0 0 ${({theme:s})=>s.borderRadius} ${({theme:s})=>s.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,T=({children:s,icon:a,...o})=>(0,t.jsxs)("div",{children:[(0,t.jsx)(m.i,{}),(0,t.jsx)(v,{as:"button",background:"primary100",padding:5,...o,children:(0,t.jsxs)(E.k,{children:[(0,t.jsx)(d,{"aria-hidden":!0,background:"primary200",children:a}),(0,t.jsx)(l.x,{paddingLeft:3,children:(0,t.jsx)(p.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:s})})]})})]})},67109:(I,f,e)=>{e.d(f,{Z:()=>l});var t=e(85893);const n=m=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...m,children:(0,t.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),l=n}}]);

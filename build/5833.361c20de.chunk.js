"use strict";(self.webpackChunkchatapp=self.webpackChunkchatapp||[]).push([[5833],{7761:(U,E,t)=>{t.d(E,{pl:()=>v,aY:()=>R,q5:()=>a.q});var e=t(67294),o=t(57993),g=t(25804),A=t(18172);const D={data:[],isLoading:!0},u=(s,d)=>(0,A.ZP)(s,i=>{switch(d.type){case"GET_DATA_SUCCEEDED":{i.data=d.data,i.isLoading=!1;break}case"GET_DATA_ERROR":{i.isLoading=!1;break}default:return i}}),v=({ssoEnabled:s})=>{const[d,i]=(0,e.useReducer)(u,D),M=(0,o.lm)(),{get:O}=(0,o.kY)();return(0,e.useEffect)(()=>{(async()=>{try{if(!s){i({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:L}=await O((0,g.IF)("providers"));i({type:"GET_DATA_SUCCEEDED",data:L})}catch(L){console.error(L),i({type:"GET_DATA_ERROR"}),M({type:"warning",message:{id:"notification.error"}})}})()},[O,s,M]),d};var n=t(14293),T=t.n(n),r=t(86896),m=t(16550),a=t(71926);const l="strapi-notification-seat-limit",f="https://cloud.strapi.io/profile/billing",h="https://strapi.io/billing/request-seats",R=()=>{const{formatMessage:s}=(0,r.Z)();let{license:d,isError:i,isLoading:M}=(0,a.q)();const O=(0,o.lm)(),{pathname:P}=(0,m.TH)(),{enforcementUserCount:L,permittedSeats:_,licenseLimitStatus:c,isHostedOnStrapiCloud:S}=d;(0,e.useEffect)(()=>{if(i||M)return;const B=!T()(_)&&!window.sessionStorage.getItem(`${l}-${P}`)&&(c==="AT_LIMIT"||c==="OVER_LIMIT");let y;c==="OVER_LIMIT"?y="warning":c==="AT_LIMIT"&&(y="softWarning"),B&&O({type:y,message:s({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:c}),title:s({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:c,enforcementUserCount:L,permittedSeats:_}),link:{url:S?f:h,label:s({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:S})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${l}-${P}`,!0)}})},[O,d,P,s,M,_,c,L,S,i])}},71926:(U,E,t)=>{t.d(E,{q:()=>A});var e=t(67294),o=t(57993),g=t(88767);function A({enabled:D}={enabled:!0}){const{get:I}=(0,o.kY)(),{data:u,isError:p,isLoading:v}=(0,g.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:r}}=await I("/admin/license-limit-information");return r},{enabled:D}),n=u!=null?u:{},T=e.useCallback(r=>{var m,a;const l=((m=n==null?void 0:n.features)!=null?m:[]).find(f=>f.name===r);return(a=l==null?void 0:l.options)!=null?a:{}},[n==null?void 0:n.features]);return{license:n,getFeature:T,isError:p,isLoading:v}}},85833:(U,E,t)=>{t.r(E),t.d(E,{CreateActionEE:()=>a});var e=t(67294),o=t(11047),g=t(84495),A=t(52624),D=t(29728),I=t(51277),u=t(23293),p=t(14293),v=t.n(p),n=t(45697),T=t.n(n),r=t(86896),m=t(7761);const a=({onClick:l})=>{const{formatMessage:f}=(0,r.Z)(),{license:{permittedSeats:h,shouldStopCreate:C},isError:R,isLoading:s}=(0,m.q5)();return R||s?null:e.createElement(o.k,{gap:2},!v()(h)&&C&&e.createElement(g.u,{description:f({id:"Settings.application.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"}),position:"left"},e.createElement(A.J,{width:`${14/16}rem`,height:`${14/16}rem`,color:"danger500",as:I.Z})),e.createElement(D.z,{"data-testid":"create-user-button",onClick:l,startIcon:e.createElement(u.Z,null),size:"S",disabled:C},f({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"})))};a.propTypes={onClick:T().func.isRequired}}}]);

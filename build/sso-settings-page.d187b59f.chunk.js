"use strict";(self.webpackChunkchatapp=self.webpackChunkchatapp||[]).push([[302],{29388:(J,m,e)=>{e.r(m),e.d(m,{SingleSignOn:()=>R,default:()=>k});var t=e(67294),E=e(17034),M=e(185),y=e(53979),C=e(29728),I=e(49066),O=e(11047),b=e(75515),A=e(11276),g=e(67819),P=e(93127),D=e(40619),T=e(82562),h=e(67730),o=e(57993),x=e(85018),F=e(18446),B=e.n(F),G=e(86896),f=e(86706),v=e(14900),S=e(36364),H=e(25804),i=e(87561);const Z=i.Ry().shape({autoRegister:i.Xg().required(o.I0.required),defaultRole:i.nK().when("autoRegister",(a,l)=>a?l.required(o.I0.required):l.nullable()),ssoLockedRoles:i.IX().nullable().of(i.nK().when("ssoLockedRoles",(a,l)=>a?l.required(o.I0.required):l.nullable()))}),R=()=>{const{formatMessage:a}=(0,G.Z)(),l=(0,f.v9)(S._),{isLoading:z,allowedActions:{canUpdate:c,canReadRoles:K}}=(0,o.ss)({...l.settings.sso,readRoles:l.settings.roles.read}),[{formErrors:n,initialData:U,isLoading:X,modifiedData:d,showHeaderButtonLoader:N},Y,{handleChange:r,handleSubmit:W}]=(0,v.G4)((0,H.IF)("providers/options"),Z,()=>{},["autoRegister","defaultRole","ssoLockedRoles"]),{roles:p}=(0,v.bF)(K);(0,o.go)();const j=z||X,L=B()(U,d);return t.createElement(E.A,null,t.createElement(o.SL,{name:"SSO"}),t.createElement(M.o,{tabIndex:-1},t.createElement("form",{onSubmit:s=>{if(L){s.preventDefault();return}W(s)}},t.createElement(y.T,{primaryAction:t.createElement(C.z,{"data-testid":"save-button",disabled:L,loading:N,startIcon:t.createElement(x.Z,null),type:"submit",size:"L"},a({id:"global.save",defaultMessage:"Save"})),title:a({id:"Settings.sso.title",defaultMessage:"Single Sign-On"}),subtitle:a({id:"Settings.sso.description",defaultMessage:"Configure the settings for the Single Sign-On feature."})}),t.createElement(I.D,null,j?t.createElement(o.dO,null):t.createElement(O.k,{direction:"column",alignItems:"stretch",gap:4,background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(b.Z,{variant:"delta",as:"h2"},a({id:"global.settings",defaultMessage:"Settings"})),t.createElement(A.r,{gap:4},t.createElement(g.P,{col:6,m:6,s:12},t.createElement(P.s,{"aria-label":"autoRegister","data-testid":"autoRegister",disabled:!c,checked:d.autoRegister,hint:a({id:"Settings.sso.form.registration.description",defaultMessage:"Create new user on SSO login if no account exists"}),label:a({id:"Settings.sso.form.registration.label",defaultMessage:"Auto-registration"}),name:"autoRegister",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{r({target:{name:"autoRegister",value:s.target.checked}})}})),t.createElement(g.P,{col:6,m:6,s:12},t.createElement(D.P,{disabled:!c,hint:a({id:"Settings.sso.form.defaultRole.description",defaultMessage:"It will attach the new authenticated user to the selected role"}),error:n.defaultRole?a({id:n.defaultRole.id,defaultMessage:n.defaultRole.id}):"",label:a({id:"Settings.sso.form.defaultRole.label",defaultMessage:"Default role"}),name:"defaultRole",onChange:s=>{r({target:{name:"defaultRole",value:s}})},placeholder:a({id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}),value:d.defaultRole},p.map(({id:s,name:u})=>t.createElement(T.W,{key:s,value:s.toString()},u)))),t.createElement(g.P,{col:6,m:6,s:12},t.createElement(h.NU,{disabled:!c,hint:a({id:"Settings.sso.form.localAuthenticationLock.description",defaultMessage:"Select the roles for which you want to disable the local authentication"}),error:n.ssoLockedRoles?a({id:n.ssoLockedRoles.id,defaultMessage:n.ssoLockedRoles.id}):"",label:a({id:"Settings.sso.form.localAuthenticationLock.label",defaultMessage:"Local authentication lock-out"}),name:"ssoLockedRoles",onChange:s=>{r({target:{name:"ssoLockedRoles",value:s}})},placeholder:a({id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}),onClear:()=>{r({target:{name:"ssoLockedRoles",emptyArray:[]}})},value:d.ssoLockedRoles||[],withTags:!0},p.map(({id:s,name:u})=>t.createElement(h.ML,{key:s,value:s.toString()},u))))))))))},k=()=>{const a=(0,f.v9)(S._);return t.createElement(o.O4,{permissions:a.settings.sso.main},t.createElement(R,null))}}}]);
